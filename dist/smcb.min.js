(function(){"use strict";var module=angular.module("ui.superMegaComboBox",[]);module.run(["$templateCache",function($templateCache){$templateCache.put("smcb/combobox.html",'<div class="input-group">                 <input                     class="form-control"                     ng-disabled="disabled"                     ng-focus="!config.openOnFocus || open()"                     ng-model="model.value"                     ng-keyup="update(this)">                 <span class="input-group-btn">                     <button class="btn icon icon-down-arrow" ng-click="toggle()" ng-disabled="disabled" type"button">&nbsp;</button>                 </span>             </div>             <ul class="dropdown-menu ui-smcb-dropdown" ng-show="isOpen" ng-transclude></ul>');$templateCache.put("smcb/option.html",'<li             class="ui-smcb-option"             ng-class="{ selected: isSelected(this) }">             <a ng-click="click(this)" ng-transclude></a></li>')}]);module.provider("smComboBoxConfig",function(){var config=this;config.appendToBody=false;config.closeOnDocumentClick=true;config.matchInputWidth=true;config.openOnFocus=false;config.$get=function(){return config}});module.directive("smCombobox",["$parse","$rootScope","$timeout","smComboBoxConfig",function($parse,$rootScope,$timeout,config){return{require:["smCombobox","ngModel"],restrict:"EA",templateUrl:"smcb/combobox.html",transclude:true,scope:{disabled:"=ngDisabled",isOpen:"=?",ngModel:"=",ngRequired:"=",value:"="},link:function(scope,$element,attrs,ctrls){var ctrl=ctrls[0];ctrl.ngModel=ctrls[1];ctrl.parseDisplayProperty=function(obj){return typeof obj==="object"?$parse(attrs.value)(obj):obj};scope.config=config;scope.model={value:undefined};scope.$watch("ngModel",function(val){scope.model.value=ctrl.parseDisplayProperty(val)});scope.update=function(){ctrl.ngModel.$setViewValue(scope.model.value)};var $input=$element.find("input");var $inputGroup=$element.find("div");var $list=$element.find("ul");$element.addClass("ui-smcb");if(config.appendToBody){$timeout(function(){$list[0].parentNode.removeChild($list[0]);angular.element(document.body).append($list)})}function reWidth(){if(config.matchInputWidth){$list.css("width",$inputGroup[0].offsetWidth+"px")}}$timeout(reWidth);if(config.matchInputWidth){angular.element(window).on("resize",function(){reWidth()})}if(config.appendToBody){var rect=$input[0].getBoundingClientRect();$list.css({left:rect.left+"px",top:rect.top+$input[0].offsetHeight+"px"})}$element.on("click",function(event){event.stopPropagation()});if(config.closeOnDocumentClick){angular.element(document).on("click",function(event){scope.close();$rootScope.$digest()})}},controller:["$scope",function($scope){var ctrl=this;$scope.close=function(){$scope.isOpen=false};$scope.open=function(){if(!$scope.disabled){$scope.isOpen=true}};$scope.toggle=function(){$scope.isOpen=!$scope.isOpen};ctrl.select=function(option){ctrl.ngModel.$setViewValue(option);ctrl.ngModel.$setTouched();$scope.close()}}]}}]);module.directive("smComboboxOption",["smComboBoxConfig",function(config){var keyword;return{require:"^smCombobox",restrict:"EA",replace:true,templateUrl:"smcb/option.html",transclude:true,link:function(scope,$element,attrs,ctrl){var getProperty=function(){return attrs.ngRepeat.split(" ")[0]};scope.click=function(option){ctrl.select(option[getProperty()])};scope.isSelected=function(option){var val=option[getProperty()];return ctrl.parseDisplayProperty(ctrl.ngModel.$viewValue)===ctrl.parseDisplayProperty(val)}}}}])})();